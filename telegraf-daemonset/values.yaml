# Default values for telegraf-daemonset.
# This is a YAML-formatted file.
## influxdb image version
## ref: https://hub.docker.com/r/library/telegraf/tags/
##
image:
  repo: "telegraf"
  tag: "1.1.0-alpine"
  pullPolicy: IfNotExist
  

## Configure resource requests and limits
## ref: http://kubernetes.io/docs/user-guide/compute-resources/
##
resources:
  requests:
    memory: 256Mi
    cpu: 0.1
  limits:
    memory: 2Gi
    cpu: 1

## Exposed telegraf configuration
## ref: https://docs.influxdata.com/telegraf/v1.1/administration/configuration/

config:
  # global_tags:
  #   foo: "bar"
  agent:
    interval: "1s"
    round_interval: true
    metric_batch_size: 1000
    metric_buffer_limit: 10000
    collection_jitter: "0s"
    flush_interval: "1s"
    flush_jitter: "0s"
    precision: ""
    debug: false
    quiet: false
    logfile: ""
    hostname: ""
    omit_hostname: false
  outputs:
    influxdb:
      urls: 
        - "http://test-influxdb.influxdb:8086"
      database: "telegraf"
      retention_policy: ""
      write_consistency: "any"
      timeout: "5s"
  inputs:
    cpu:
      percpu: true
      totalcpu: true
      collect_cpu_time: false
    disk:
      ignore_fs: 
        - "tmpfs" 
        - "devtmpfs"
    diskio:
    kernel:
    mem:
    processes:
    swap:
    system:
    dns_query:
      servers: 
        - "8.8.8.8"
      domains:
        - "influxcloud.net"
    kubernetes:
      url: "http://$NODE_IP:10255"
      bearer_token: "/var/run/secrets/kubernetes.io/serviceaccount/token"
      insecure_skip_verify: true
    prometheus:
      urls: 
        - "https://kubernetes.default:443/metrics"
      name_prefix: "k8s_"
      bearer_token: "/var/run/secrets/kubernetes.io/serviceaccount/token"
      insecure_skip_verify: true